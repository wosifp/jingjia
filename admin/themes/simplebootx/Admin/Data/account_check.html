<admintpl file="header" />
</head>
<!-- <script src="__PUBLIC__/js/jqueryh/jquery-3.3.1.min.js"></script> -->
<script src="__PUBLIC__/js/jquery.js"></script>
<link href="__PUBLIC__/admin/css/bootstrap.min.css" rel="stylesheet">
<link href="__PUBLIC__/admin/css/style.css" rel="stylesheet" type="text/css" />
<script src="__PUBLIC__/admin/js/bootstrap.min.js" type="text/javascript"></script>
<script src="__PUBLIC__/admin/js/style.js" type="text/javascript"></script>
<script src="__PUBLIC__/js/jquery-ui.min.js"></script>
<!--<script src="__PUBLIC__/admin/js/laydate.js"></script>-->
<!--<link type="text/css" rel="stylesheet" href="__PUBLIC__/admin/css/laydate.css">-->
<!--<link type="text/css" rel="stylesheet" href="__PUBLIC__/admin/css/laydate(1).css" id="LayDateSkin">-->
<script src="__PUBLIC__/js/datePicker/laydate/laydate.js"></script>
<script src="__PUBLIC__/js/echarts/echarts.min.js"></script>
<script src="__PUBLIC__/js/echarts/china.js"></script>

<script src="__PUBLIC__/tree-multiselect/jquery.tree-multiselect.js"></script>
<link rel="stylesheet" href="__PUBLIC__/tree-multiselect/jquery.tree-multiselect.min.css">

<link type="text/css" rel="stylesheet" href="__PUBLIC__/js/jsgrid/jsgrid.css" />
<link type="text/css" rel="stylesheet" href="__PUBLIC__/js/jsgrid/jsgrid-theme.css" />
<link href="__PUBLIC__/js/areapicker/zyzn_1.css" type="text/css" rel="stylesheet">

<script type="text/javascript" src="__PUBLIC__/js/jsgrid/jsgrid.js"></script>
<script src="__PUBLIC__/js/areapicker/City_data.js"></script>
<script src="__PUBLIC__/js/areapicker/areadata.js"></script>
<script src="__PUBLIC__/js/areapicker/auto_area.js"></script>
<script type="text/javascript" src="__PUBLIC__/admin/js/functions_module.js"></script>
<body>
    <div class="qi_right_1">
        <!--层级选择 pager_select -->
        <div class="qi_con_1">
            <ul class="pager" id="pager_select">
                <li>
                    <a href="#">账户</a>
                </li>
                <li>
                    <a href="#">计划</a>
                </li>
                <li>
                    <a href="#">单元</a>
                </li>
                <li>
                    <a href="#">关键词</a>
                </li>
                <li>
                    <a href="#">创意</a>
                </li>
            </ul>
        </div>
        <div class="qi_con_1">
            <div class="qi_float_l qi_bfb_30">
                <p class="qi_p_2" style="display: block" id="fanwei">
                    <span id="set_fanwei"></span>范围：
                    <a class="btn btn-default" href="javascript:" role="button">选择
                        <span class="caret"></span>
                    </a>
                    <span id="cengji" style="display: none"></span>
                    <input type="checkbox" id="compare_radio" value="true" >对比</input>
                </p>
                
                <div id="firstpane" class="menu_list" style="display:none">
                    <hr>
                    <select id="mytreeselect" multiple="multiple"></select>
                    <button id="send_mytree" class="btn">确定</button>
                </div>

            </div>
        </div>
        <!-- 时间 -->
        <div class="qi_con_1">
            <div class="qi_float_l qi_bfb_30">
                时间：
                <input type="text" name="date_pick" id="datepicker1">
                <!--  <input type="hidden" value="" id="riqi"> -->
            </div>
            <!--   <span style="color: red">*必填；默认为昨天——今天</span> -->
            <!--时间 end-->
        </div>
        <!-- 设备与地域 -->
        <div class="qi_con_1">
            <div class="qi_float_l qi_bfb_30">
                设备：
                <select id="device">
                    <option value="3">全部</option>
                    <option value="1">PC</option>
                    <option value="2">移动</option>
                </select>
            </div>
            <!--  <span style="color: red">*必填；默认为全部</span> -->
            <!--设备 end-->
            <!-- 地域 -->
            <div class="qi_float_l qi_bfb_30">
                <ul class="pager qi_0_mag_bott">地域：
                    <li>
                        <a href="javascript:">全部</a>
                    </li>
                    <li id="selfdefine_region">
                        <a href="javascript:">自定义</a>
                    </li>
                </ul>
                <div hidden="true">
                    <input type="text" name="area_pick" class="area-duoxuan" id="area_multipicker" value="{$area_city}" data-value="" hidden="true">
                </div>
                <button id="area_action" hidden="true"></button>
            </div>
        </div>


        <!-- 分时分日类型 -->
        <div class="qi_con_1">
            查看类型:
            <ul class="pager" id="filter_select">
                <li id="points" value="5">
                    <a href="javascript:">分日</a>
                </li>
                <li value="7">
                    <a href="javascript:">分时</a>
                </li>
                <li value="4">
                    <a href="javascript:">分周</a>
                </li>
                <li value="3">
                    <a href="javascript:" id="monthly">分月</a>
                </li>
                <li value="1">
                    <a href="javascript:">分季度</a>
                </li>
                <li value="22">
                    <a href="javascript:">设备对比</a>
                </li>
                <li value="33">
                    <a href="javascript:">地域分布</a>
                </li>
                <li value="44">
                    <a href="javascript:">层级分布</a>
                </li>
                <li value="55">
                    <a href="javascript:">数据构成</a>
                </li>
                <li value="66">
                    <a href="javascript:">层级对比</a>
                </li>

                <!--<li value="66"><a href="#">关键词对比</a></li>-->
                <!--<li value="77"><a href="#">质量度</a></li>-->
            </ul>
            <!--  <span style="color: red" >*选填</span>
            <button id="chakan">查看</button> -->
        </div>
        <div class="qi_con_1">
            <div class="qi_bfb_100 qi_padt_30" id="div_1" hidden="false">
                <select class="qi_float_r" id="kpi_line_select">
                    <option value="impression">展现</option>
                    <option value="cost">消费</option>
                    <option value="click">点击</option>
                    <option value="cpc">CPC</option>
                    <option value="ctr">CTR</option>
                    <option value="position">平均排名</option>
                </select>
            </div>
            <div class="qi_bfb_100" id="div_2" hidden="true">
                <select class="qi_float_r" id="region_select">
                    <option value="region_impression">展现</option>
                    <option value="region_cost">消费</option>
                    <option value="region_click">点击</option>
                    <option value="region_cpc">CPC</option>
                    <option value="region_ctr">CTR</option>
                    <!--  <option value="region_cpm">CPM</option> -->
                    <!-- <option value="region_avgrank">平均排名</option> -->
                </select>
            </div>
            <div class="qi_bfb_100" id="div_3" hidden="true">
                <select class="qi_float_r" id="compare_select">
                    <option value="compare_position_impression">平均排名/展现</option>
                    <option value="compare_ctr_impression">点击率/展现</option>
                    <option value="compare_cost_click">消费/点击</option>
                    <option value="compare_ctr_cpc">CTR/CPC</option>

                    <!--  <option value="region_cpm">CPM</option> -->
                    <!-- <option value="region_avgrank">平均排名</option> -->
                </select>
            </div>
            <div class="qi_bfb_100" id="div_4" hidden="true">
                <select class="qi_float_r" id="data_pie_select">
                    <option value="data_pie_impression">展现</option>
                    <option value="data_pie_cost">消费</option>
                    <option value="data_pie_click">点击</option>
                </select>
            </div>


            <!--折线图-->
            <div id="myChart0" style="width: 900px;height:500px;display: block;"></div>
            <div id="chart_data" hidden="true">{$chart_data}</div>

            <!--  <div id="myChart_map" style="width: 900px;height: 500px;display: block;"></div>    
            <div id="chart_map_data" hidden="true">{$chart_map_data}</div> -->
        </div>
    </div>
    <!-- 折线图 -->
    <script>
        var myChart0 = echarts.init(document.getElementById('myChart0'));
        var option0 = '';
        function set_option_0($data) {
            option0 = {
                legend: {
                    data: [$data.name]
                },
                toolbox: {
                    left: '5%',
                    top: 'auto',
                    itemSize: 20,
                    feature: {
                        magicType: {
                            type: ['line', 'bar']
                        },
                        saveAsImage: {
                            pixelRatio: 3
                        }
                    }
                },

                tooltip: {
                    trigger: 'item',
                    formatter: '{a} , {b} , {c}'
                },
                grid: {
                    left: '10%',
                    top: '12%',
                    right: '10%',
                    bottom: '25%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    axisLabel: {
                        interval: 0,
                        rotate: 45,
                    },
                    data: $data.xAxis_data
                },
                yAxis: {
                    type: 'value'
                },
                dataZoom: [
                    {
                        type: 'slider',
                        show: true,
                        start: 0,
                        end: 100,
                        handleSize: 8
                    },
                    {
                        type: 'inside',
                        start: 0,
                        end: 100
                    },
                    {
                        type: 'slider',
                        show: true,
                        yAxisIndex: 0,
                        filterMode: 'empty',
                        width: 12,
                        height: '70%',
                        handleSize: 8,
                        showDataShadow: false,
                        left: '93%'
                    }
                ],
                series: $data.series_data
            };
            myChart0.setOption(option0, true);

        }

    </script>
    <!--柱状图-->
    <script>
        var option_bar ='';
        function set_option_bar($data,$str){
             option_bar = {
                toolbox: {
                    feature: {
                        saveAsImage: {
                            pixelRatio: 3
                        }
                    }
                },
                tooltip:{
                trigger:'item',
                formatter:'{a} , {b} , {c}'
            },
            legend: {
                    data: ['展现', '消费', '点击', 'cpc', 'ctr', '平均排名']
                },
                grid:{
                    left:'10%',
                    top: '12%',
                    right: '10%',
                    bottom:'25%',
                    containLabel: true
                    
                },
                xAxis: {
                    type: 'category',
                    axisLabel:{
                        interval:0,
                        rotate:45,
                    },
                    data:  $data[0]['data'].name
                },
                yAxis: {
                    type: 'value',
                    /*axisLabel: {
                    formatter: function (a) {
                        a = +a;
                        return isFinite(a)
                            ? echarts.format.addCommas(+a / 1000)
                            : '';
                    }
                    }*/
                },
                dataZoom:[
                    {
                        type: 'slider',
                        show: true,
                        start: 0,
                        end: 100,
                        handleSize: 8
                    },
                    {
                        type: 'inside',
                        start: 0,
                        end: 100
                    },
                    {
                        type: 'slider',
                        show: true,
                        yAxisIndex: 0,
                        filterMode: 'empty',
                        width: 12,
                        height: '70%',
                        handleSize: 8,
                        showDataShadow: false,
                        left: '93%'
                    }
                ],
                series:  [{
                    name: '展现',
                    type: 'bar',
                    /*stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: $data[0]['data'].impression,
                    smooth: true
                }, {
                    name: '消费',
                    type: 'bar',
                    /*stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: $data[0]['data'].cost,
                    smooth: true
                }, {
                    name: '点击',
                    type: 'bar',
                    /* stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: $data[0]['data'].click,
                    smooth: true
                }, {
                    name: 'cpc',
                    type: 'bar',
                    /*stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: $data[0]['data'].cpc,
                    smooth: true
                }, {
                    name: 'ctr',
                    type: 'bar',
                    /*stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: $data[0]['data'].ctr,
                    smooth: true
                }, {
                    name: '平均排名',
                    type: 'bar',
                    /*stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: $data[0]['data'].position,
                    smooth: true
                }]
            };
            myChart0.setOption(option_bar,true);
        }
        
    </script>
    <!--设备对比 option_device-->
    <script>
        var option_device = '';

        function set_option_device($data) {
            option_device = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    data: ['展现', '消费', '点击', 'cpc', 'ctr', '平均排名']
                },
                toolbox: {
                    show: true,
                    left: '5%',
                    feature: {
                        mark: {
                            show: true
                        },
                        dataView: {
                            show: true,
                            readOnly: false
                        },
                        /*magicType : {show: true, type: ['line', 'bar', 'stack', 'tiled']},*/
                        magicType: {
                            show: true,
                            type: ['bar', 'tiled']
                        },
                        restore: {
                            show: true
                        },
                        saveAsImage: {
                            show: true
                        }
                    }
                },
                calculable: true,
                xAxis: [{
                    type: 'category',
                    /*boundaryGap : false,*/
                    data: ['pc', '移动']
                }],
                yAxis: [{
                    type: 'value'
                }],
                series: [{
                    name: '展现',
                    type: 'bar',
                    /*stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: [$.parseJSON($("#chart_data").text())[0]['data'].pc.impression[0], $.parseJSON($("#chart_data").text())[0]['data'].mobile.impression[0]],
                    smooth: true
                }, {
                    name: '消费',
                    type: 'bar',
                    /*stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: [$.parseJSON($("#chart_data").text())[0]['data'].pc.cost[0], $.parseJSON($("#chart_data").text())[0]['data'].mobile.cost[0]],
                    smooth: true
                }, {
                    name: '点击',
                    type: 'bar',
                    /* stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: [$.parseJSON($("#chart_data").text())[0]['data'].pc.click[0], $.parseJSON($("#chart_data").text())[0]['data'].mobile.click[0]],
                    smooth: true
                }, {
                    name: 'cpc',
                    type: 'bar',
                    /*stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: [$.parseJSON($("#chart_data").text())[0]['data'].pc.cpc[0], $.parseJSON($("#chart_data").text())[0]['data'].mobile.cpc[0]],
                    smooth: true
                }, {
                    name: 'ctr',
                    type: 'bar',
                    /*stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: [$.parseJSON($("#chart_data").text())[0]['data'].pc.ctr[0], $.parseJSON($("#chart_data").text())[0]['data'].mobile.ctr[0]],
                    smooth: true
                }, {
                    name: '平均排名',
                    type: 'bar',
                    /*stack: '总量',*/
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: [$.parseJSON($("#chart_data").text())[0]['data'].pc.position[0], $.parseJSON($("#chart_data").text())[0]['data'].mobile.position[0]],
                    smooth: true
                }]
            };
            myChart0.setOption(option_device, true);
        }
    </script>


    <!--饼图 option_pie-->
    <script type="text/javascript">
        var option_pie ='';
        function set_option_pie($data,$str){
            $pie_index = $str.split('_')[2];
            $name_pie = new Array();
            $name_pie['impression'] = '展现';
            $name_pie['cost'] = '消费';
            $name_pie['click'] = '点击';
            option_pie = {
            toolbox: {
                feature: {
                    saveAsImage: {
                        pixelRatio: 3
                    }
                }
            },
            title: {
                text: $name_pie[$pie_index]+'构成',
                
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: $data.name
            },
            series: [{
                name: $name_pie[$pie_index]+'构成',
                type: 'pie',
                radius: '55%',
                center: ['50%', '60%'],
                data: $data[$pie_index]['data'],
                itemStyle: {
                    emphasis: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }]
        };
        myChart0.setOption(option_pie,true);
        }
        
    </script>
    <!--区域图 option_region-->
    <script>
        /*var myChart_map = echarts.init(document.getElementById('myChart_map'));*/
        var geoCoordMap = {
            '海门': [121.15, 31.89],
            '鄂尔多斯': [109.781327, 39.608266],
            '招远': [120.38, 37.35],
            '舟山': [122.207216, 29.985295],
            '齐齐哈尔': [123.97, 47.33],
            '盐城': [120.13, 33.38],
            '赤峰': [118.87, 42.28],
            '青岛': [120.33, 36.07],
            '乳山': [121.52, 36.89],
            '金昌': [102.188043, 38.520089],
            '泉州': [118.58, 24.93],
            '莱西': [120.53, 36.86],
            '日照': [119.46, 35.42],
            '胶南': [119.97, 35.88],
            '南通': [121.05, 32.08],
            '拉萨': [91.11, 29.97],
            '云浮': [112.02, 22.93],
            '梅州': [116.1, 24.55],
            '文登': [122.05, 37.2],
            '上海': [121.48, 31.22],
            '攀枝花': [101.718637, 26.582347],
            '威海': [122.1, 37.5],
            '承德': [117.93, 40.97],
            '厦门': [118.1, 24.46],
            '汕尾': [115.375279, 22.786211],
            '潮州': [116.63, 23.68],
            '丹东': [124.37, 40.13],
            '太仓': [121.1, 31.45],
            '曲靖': [103.79, 25.51],
            '烟台': [121.39, 37.52],
            '福州': [119.3, 26.08],
            '瓦房店': [121.979603, 39.627114],
            '即墨': [120.45, 36.38],
            '抚顺': [123.97, 41.97],
            '玉溪': [102.52, 24.35],
            '张家口': [114.87, 40.82],
            '阳泉': [113.57, 37.85],
            '莱州': [119.942327, 37.177017],
            '湖州': [120.1, 30.86],
            '汕头': [116.69, 23.39],
            '昆山': [120.95, 31.39],
            '宁波': [121.56, 29.86],
            '湛江': [110.359377, 21.270708],
            '揭阳': [116.35, 23.55],
            '荣成': [122.41, 37.16],
            '连云港': [119.16, 34.59],
            '葫芦岛': [120.836932, 40.711052],
            '常熟': [120.74, 31.64],
            '东莞': [113.75, 23.04],
            '河源': [114.68, 23.73],
            '淮安': [119.15, 33.5],
            '泰州': [119.9, 32.49],
            '南宁': [108.33, 22.84],
            '营口': [122.18, 40.65],
            '惠州': [114.4, 23.09],
            '江阴': [120.26, 31.91],
            '蓬莱': [120.75, 37.8],
            '韶关': [113.62, 24.84],
            '嘉峪关': [98.289152, 39.77313],
            '广州': [113.23, 23.16],
            '延安': [109.47, 36.6],
            '太原': [112.53, 37.87],
            '清远': [113.01, 23.7],
            '中山': [113.38, 22.52],
            '昆明': [102.73, 25.04],
            '寿光': [118.73, 36.86],
            '盘锦': [122.070714, 41.119997],
            '长治': [113.08, 36.18],
            '深圳': [114.07, 22.62],
            '珠海': [113.52, 22.3],
            '宿迁': [118.3, 33.96],
            '咸阳': [108.72, 34.36],
            '铜川': [109.11, 35.09],
            '平度': [119.97, 36.77],
            '佛山': [113.11, 23.05],
            '海口': [110.35, 20.02],
            '江门': [113.06, 22.61],
            '章丘': [117.53, 36.72],
            '肇庆': [112.44, 23.05],
            '大连': [121.62, 38.92],
            '临汾': [111.5, 36.08],
            '吴江': [120.63, 31.16],
            '石嘴山': [106.39, 39.04],
            '沈阳': [123.38, 41.8],
            '苏州': [120.62, 31.32],
            '茂名': [110.88, 21.68],
            '嘉兴': [120.76, 30.77],
            '长春': [125.35, 43.88],
            '胶州': [120.03336, 36.264622],
            '银川': [106.27, 38.47],
            '张家港': [120.555821, 31.875428],
            '三门峡': [111.19, 34.76],
            '锦州': [121.15, 41.13],
            '南昌': [115.89, 28.68],
            '柳州': [109.4, 24.33],
            '三亚': [109.511909, 18.252847],
            '自贡': [104.778442, 29.33903],
            '吉林': [126.57, 43.87],
            '阳江': [111.95, 21.85],
            '泸州': [105.39, 28.91],
            '西宁': [101.74, 36.56],
            '宜宾': [104.56, 29.77],
            '呼和浩特': [111.65, 40.82],
            '成都': [104.06, 30.67],
            '大同': [113.3, 40.12],
            '镇江': [119.44, 32.2],
            '桂林': [110.28, 25.29],
            '张家界': [110.479191, 29.117096],
            '宜兴': [119.82, 31.36],
            '北海': [109.12, 21.49],
            '西安': [108.95, 34.27],
            '金坛': [119.56, 31.74],
            '东营': [118.49, 37.46],
            '牡丹江': [129.58, 44.6],
            '遵义': [106.9, 27.7],
            '绍兴': [120.58, 30.01],
            '扬州': [119.42, 32.39],
            '常州': [119.95, 31.79],
            '潍坊': [119.1, 36.62],
            '重庆': [106.54, 29.59],
            '台州': [121.420757, 28.656386],
            '南京': [118.78, 32.04],
            '滨州': [118.03, 37.36],
            '贵阳': [106.71, 26.57],
            '无锡': [120.29, 31.59],
            '本溪': [123.73, 41.3],
            '克拉玛依': [84.77, 45.59],
            '渭南': [109.5, 34.52],
            '马鞍山': [118.48, 31.56],
            '宝鸡': [107.15, 34.38],
            '焦作': [113.21, 35.24],
            '句容': [119.16, 31.95],
            '北京': [116.46, 39.92],
            '徐州': [117.2, 34.26],
            '衡水': [115.72, 37.72],
            '包头': [110, 40.58],
            '绵阳': [104.73, 31.48],
            '乌鲁木齐': [87.68, 43.77],
            '枣庄': [117.57, 34.86],
            '杭州': [120.19, 30.26],
            '淄博': [118.05, 36.78],
            '鞍山': [122.85, 41.12],
            '溧阳': [119.48, 31.43],
            '库尔勒': [86.06, 41.68],
            '安阳': [114.35, 36.1],
            '开封': [114.35, 34.79],
            '济南': [117, 36.65],
            '德阳': [104.37, 31.13],
            '温州': [120.65, 28.01],
            '九江': [115.97, 29.71],
            '邯郸': [114.47, 36.6],
            '临安': [119.72, 30.23],
            '兰州': [103.73, 36.03],
            '沧州': [116.83, 38.33],
            '临沂': [118.35, 35.05],
            '南充': [106.110698, 30.837793],
            '天津': [117.2, 39.13],
            '富阳': [119.95, 30.07],
            '泰安': [117.13, 36.18],
            '诸暨': [120.23, 29.71],
            '郑州': [113.65, 34.76],
            '哈尔滨': [126.63, 45.75],
            '聊城': [115.97, 36.45],
            '芜湖': [118.38, 31.33],
            '唐山': [118.02, 39.63],
            '平顶山': [113.29, 33.75],
            '邢台': [114.48, 37.05],
            '德州': [116.29, 37.45],
            '济宁': [116.59, 35.38],
            '荆州': [112.239741, 30.335165],
            '宜昌': [111.3, 30.7],
            '义乌': [120.06, 29.32],
            '丽水': [119.92, 28.45],
            '洛阳': [112.44, 34.7],
            '秦皇岛': [119.57, 39.95],
            '株洲': [113.16, 27.83],
            '石家庄': [114.48, 38.03],
            '莱芜': [117.67, 36.19],
            '常德': [111.69, 29.05],
            '保定': [115.48, 38.85],
            '湘潭': [112.91, 27.87],
            '金华': [119.64, 29.12],
            '岳阳': [113.09, 29.37],
            '长沙': [113, 28.21],
            '衢州': [118.88, 28.97],
            '廊坊': [116.7, 39.53],
            '菏泽': [115.480656, 35.23375],
            '合肥': [117.27, 31.86],
            '武汉': [114.31, 30.52],
            '大庆': [125.03, 46.58]
        };


        var convertData = function (data) {
            var res = [];
            for (var i = 0; i < data.length; i++) {
                var geoCoord = geoCoordMap[data[i].name];
                if (geoCoord) {
                    res.push({
                        name: data[i].name,
                        value: geoCoord.concat(data[i].value)
                    });
                }
            }
            return res;
        };
        var region_grid_city_name = '';
        var region_grid_city_data = '';
        var region_grid_province_name = '';
        var region_grid_province_data = '';
        var region_map_city_data = '';
        var region_map_province_data = '';
        var option_region = '';
        function set_option_region($data) {
            region_grid_city_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['impression']['name'].slice(0, 10);
            region_grid_city_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['impression']['data'].slice(0, 10);
            region_grid_province_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['impression']['name'].slice(0, 10);
            region_grid_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['impression']['data'].slice(0, 10);
            region_map_city_data = convertData($.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_map2['impression']);
            region_map_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_map['impression'];

            option_region = {

                toolbox: {
                    show: true,
                    orient: 'horizontal',
                    left: 'right',
                    top: 'top',
                    feature: {
                        dataView: {
                            readOnly: false
                        },
                        restore: {},
                        saveAsImage: {
                            pixelRatio: 4,
                            backgroundColor: '#fff'
                        }
                    }
                },

                legend: {
                    orient: 'horizontal',
                    top: '20%',
                    left: '66%',
                    data: ['省份', '城市'],
                    selectedMode: 'single',
                    selected: {
                        '省份': true,
                        '城市': false
                    }

                },
                grid: {
                    x: '66%',
                    y: '27%',
                    width: '27%',
                    height: '60%',
                    show: true
                },
                xAxis: {
                    type: 'value',
                    show: true

                },
                yAxis: {

                    type: 'category',
                    inverse: true,
                    data: region_grid_province_name
                },
                /*图例 */
                visualMap: {
                    orient: 'horizontal',

                    type: 'continuous',
                    min: 0,
                    max: Math.ceil(Math.max(...region_grid_province_data)),
                    text: ['High', 'Low'],
                    realtime: false,
                    calculable: true,
                    seriesIndex: 3,
                    color: ['orangered', 'yellow', 'lightskyblue']
                },
                geo: {
                    map: 'china',
                    roam: true,
                    left: '7%',
                    label: {
                        normal: {
                            show: true,
                            textStyle: {
                                color: 'rgba(0,0,0,0.4)'
                            }
                        }
                    },
                    itemStyle: {
                        normal: {
                            borderColor: 'rgba(0, 0, 0, 0.2)'
                        },
                        emphasis: {
                            areaColor: null,
                            shadowOffsetX: 0,
                            shadowOffsetY: 0,
                            shadowBlur: 20,
                            borderWidth: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                },
                /*鼠标移动*/
                tooltip: {
                    // show: false, //不显示提示标签
                    formatter: function (params) {
                        if (option_region.legend.selected.城市 == true) {
                            $str = JSON.stringify(params.value).split(",");

                            if ($str[2] == null) {
                                return params.name + ':' + params.value;
                            } else {
                                $value = $str[2].split("]")[0];
                                return params.name + ':' + $value;
                            }
                        } else {
                            return params.name + ' : ' + params.value;
                        }
                    },
                    /*提示标签格式*/
                    backgroundColor: "#ff7f50", //提示标签背景颜色
                    textStyle: {
                        color: "#fff"
                    } //提示标签字体颜色
                },
                series: [{
                    name: '省份',
                    type: 'bar',
                    data: region_grid_province_data,
                    itemStyle: {
                        normal: {
                            color: 'lightskyblue'
                        }
                    }
                }, {
                    name: '城市',
                    type: 'bar',
                    data: region_grid_city_data,
                    itemStyle: {
                        normal: {
                            color: 'lightskyblue'
                        }
                    }
                }, {
                    name: "城市",
                    type: 'scatter',
                    coordinateSystem: 'geo',
                    data: region_map_city_data,
                    symbolSize: 12,
                    geoIndex: 0,
                    symbolRotate: 35,
                    label: {
                        normal: {
                            /*formatter: function(params){
                             $str = JSON.stringify(params.value) ;
                             $value = $str.split(",");
                             return params.name+':'+$value[2];
                            },*/
                            position: 'right',
                            show: false
                        },
                        emphasis: {
                            show: true
                        }
                    },
                    itemStyle: {
                        normal: {
                            color: '#F06C00'
                        }
                    }
                }, {
                    name: "省份",
                    type: 'map',
                    mapType: 'china',
                    geoIndex: 0,
                    label: {
                        normal: {
                            show: true, //显示省份标签
                            textStyle: {
                                color: "#c71585"
                            } //省份标签字体颜色
                        },
                        emphasis: {
                            //对应的鼠标悬浮效果
                            show: true,
                            textStyle: {
                                color: "#800080"
                            }
                        }
                    },

                    itemStyle: {
                        normal: {
                            borderWidth: .5, //区域边框宽度
                            borderColor: '#009fe8', //区域边框颜色
                            areaColor: "#ffefd5", //区域颜色
                        },
                        emphasis: {
                            borderWidth: .5,
                            borderColor: '#4b0082',
                            areaColor: "#ffdead",
                        }
                    },
                    data: region_map_province_data
                }],
            };
            myChart0.setOption(option_region, true);
        }

        myChart0.on('legendselectchanged', function (params) {
            if (params.name == "城市") {
                option_region.yAxis.data = region_grid_city_name;
                option_region.visualMap.seriesIndex = 2;
                option_region.legend.selected = {
                    '省份': false,
                    '城市': true
                };
                myChart0.setOption(option_region);
            } else if (params.name == "省份") {
                option_region.yAxis.data = region_grid_province_name;
                option_region.visualMap.seriesIndex = 3;
                option_region.legend.selected = {
                    '省份': true,
                    '城市': false
                };
                myChart0.setOption(option_region);
            }
            console.log(params);
        });

        $("#region_select").change(function (event) {
            console.log("region_select xxxxxxxxxxxxxxxxxxchangeg");
            console.log($(this).val());
            switch ($(this).val()) {
                case 'region_impression':
                    region_grid_city_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['impression']['name'].slice(0, 10);
                    region_grid_city_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['impression']['data'].slice(0, 10);
                    region_map_city_data = convertData($.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_map2['impression']);
                    region_grid_province_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['impression']['name'].slice(0, 10);
                    region_grid_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['impression']['data'].slice(0, 10);
                    region_map_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_map['impression'];
                    break;
                case 'region_cost':

                    region_grid_city_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['cost']['name'].slice(0, 10);
                    region_grid_city_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['cost']['data'].slice(0, 10);
                    region_map_city_data = convertData($.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_map2['cost']);
                    region_grid_province_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['cost']['name'].slice(0, 10);
                    region_grid_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['cost']['data'].slice(0, 10);
                    region_map_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_map['cost'];
                    break;
                case 'region_click':

                    region_grid_city_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['click']['name'].slice(0, 10);
                    region_grid_city_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['click']['data'].slice(0, 10);
                    region_map_city_data = convertData($.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_map2['click']);
                    region_grid_province_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['click']['name'].slice(0, 10);
                    region_grid_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['click']['data'].slice(0, 10);
                    region_map_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_map['click'];
                    break;
                case 'region_cpc':

                    region_grid_city_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['cpc']['name'].slice(0, 10);
                    region_grid_city_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['cpc']['data'].slice(0, 10);
                    region_map_city_data = convertData($.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_map2['cpc']);
                    region_grid_province_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['cpc']['name'].slice(0, 10);
                    region_grid_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['cpc']['data'].slice(0, 10);
                    region_map_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_map['cpc'];
                    break;
                case 'region_ctr':

                    region_grid_city_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['ctr']['name'].slice(0, 10);
                    region_grid_city_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['ctr']['data'].slice(0, 10);
                    region_map_city_data = convertData($.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_map2['ctr']);
                    region_grid_province_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['ctr']['name'].slice(0, 10);
                    region_grid_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['ctr']['data'].slice(0, 10);
                    region_map_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_map['ctr'];
                    break;
                case 'region_cpm':

                    region_grid_city_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['cpm']['name'].slice(0, 10);
                    region_grid_city_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['cpm']['data'].slice(0, 10);
                    region_map_city_data = convertData($.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_map2['cpm']);
                    region_grid_province_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['cpm']['name'].slice(0, 10);
                    region_grid_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['cpm']['data'].slice(0, 10);
                    region_map_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_map['cpm'];
                    break;
                case 'region_avgrank':

                    region_grid_city_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['position']['name'].slice(0, 10);
                    region_grid_city_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_grid2['position']['data'].slice(0, 10);
                    region_map_city_data = convertData($.parseJSON($("#chart_data").text())[0]['data'].region_data2.region_map2['position']);
                    region_grid_province_name = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['position']['name'].slice(0, 10);
                    region_grid_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_grid['position']['data'].slice(0, 10);
                    region_map_province_data = $.parseJSON($("#chart_data").text())[0]['data'].region_data.region_map['position'];
                    break;
                default:
                    break;
            }
            if (option_region.legend.selected.城市 == true) {
                option_region.yAxis.data = region_grid_city_name;
            } else {
                option_region.yAxis.data = region_grid_province_name;
            }

            option_region.series[0].data = region_grid_province_data;
            option_region.series[1].data = region_grid_city_data;
            option_region.series[2].data = region_map_city_data;
            option_region.series[3].data = region_map_province_data;
            option_region.visualMap.max = Math.max.apply(null, region_grid_province_data);
            myChart0.setOption(option_region, true);
        });
           /* myChart4.setOption(option4);
            myChart4.on('mouseover', function(params) {
                var dataIndex = params.dataIndex;
            });
            myChart4.dispatch({
                type: 'showTip',
                x: 10,
                y: 10
            })
            var img = new Image();
            img.src = myChart4.getDataURL();
            document.getElementById("button_download").onclick = function() {
                document.getElementById("download_img").href = img.src;
            }*/
    </script>

    <!--散点图 option_scatter-->
    <script>
        var option_scatter = '';
        function set_option_scatter($data,$str) {
            $index1 = $str.split("_")[1];
            $index2 = $str.split("_")[2];
        $name_array=new Array();
        $name_array['impression']= "展现";
        $name_array['cost'] ="消费";
        $name_array['click']= "点击";
        $name_array['cpc'] ="cpc";
        $name_array['ctr'] ="ctr";
        $name_array['position']="平均排名";
        var sourceData = $data;

        var seriesData = sourceData.map(function (item, index, array) {
            return {
                name: item['name'],
                value: [item[$index1], item[$index2]]
            }
        });

        var computeIndex1AvgLine = function () {
            let sum = 0
            sourceData.forEach(function (item) {
                sum += Number(item[$index1]);
            })
            return sum / sourceData.length;
        };

        var computeIndex2AvgLine = function () {
            let sum = 0
            sourceData.forEach(function (item) {
                sum += Number(item[$index2]);
            })
            return sum / sourceData.length;
        };
        var avg = {
            index1AvgLine: computeIndex1AvgLine(),
            index2AvgLine: computeIndex2AvgLine()
        };
        
            option_scatter = {
                title: {
                    text: '四象限图'
                },
                tooltip: {
                    trigger: 'item',
                    axisPointer: {
                        show: true,
                        type: 'cross',
                        lineStyle: {
                            type: 'dashed',
                            width: 1
                        },
                    },
                    formatter: function (obj) {
                        if (obj.componentType == "series") {
                            return '<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px">' +
                                obj.name +
                                '</div>' +
                                '<span>' +
                                $name_array[$index1] +
                                '</span>' +
                                ' : ' + obj.data.value[0]  +
                                '<br/>' +
                                '<span>' +
                                $name_array[$index2] +
                                '</span>' +
                                ' : ' + obj.data.value[1] 
                        }
                    }
                },
                label: {
                    normal: {
                        show: true,
                        position: 'bottom',
                        formatter: function (params) {
                            return params.name
                        }
                    },
                    emphasis: {
                        show: true,
                        position: 'bottom',
                    }
                },
                grid: {
                    left: '10%',
                    top: '12%',
                    right: '10%',
                    bottom: '25%',
                    containLabel: true
                },
                xAxis: {
                    name: $name_array[$index1],
                    type: 'value',
                    scale: true,
                    axisLabel: {
                        formatter: '{value} '
                    },
                    splitLine: {
                        show: false
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#3259B8'
                        }
                    }
                },
                yAxis: {
                    name: $name_array[$index2],
                    type: 'value',
                    scale: true,
                    axisLabel: {
                        formatter: '{value} '
                    },
                    splitLine: {
                        show: false
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#3259B8'
                        }
                    }
                },
                toolbox: {
                    feature: {
                        dataZoom: {}
                    }
                },
                visualMap: {
                    min: 0,
                    max: 800,
                    dimension: 0,
                    left: 'left',
                    top: 'bottom',
                    text: ['高', '低'], // 文本，默认为数值文本
                    calculable: true,
                    itemWidth: 18,
                    itemHeight: 160,
                    textStyle: {
                        color: '#3259B8',
                        height: 56,
                        fontSize: 11,
                        lineHeight: 60,
                    },
                    inRange: {
                        color: ['#7AB7F7', '#b45ef7']
                    },
                    padding: [50, 20],
                    orient: 'horizontal',
                },
                series: [{
                    type: 'scatter',
                    data: seriesData,
                    symbolSize: 20,
                    markLine: {
                        label: {
                            normal: {
                                formatter: function (params) {
                                    if (params.dataIndex == 0) {
                                        return params.value ;
                                    } else if (params.dataIndex == 1) {
                                        return params.value ;
                                    }
                                    return params.value;
                                }
                            }
                        },
                        lineStyle: {
                            normal: {
                                color: "#626c91",
                                type: 'solid',
                                width: 1,
                            },
                            emphasis: {
                                color: "#d9def7"
                            }
                        },
                        data: [{
                            xAxis: avg.index1AvgLine,
                            name: $name_array[$index1]+'平均线',
                            itemStyle: {
                                normal: {
                                    color: "#b84a58",
                                }
                            }
                        }, {
                            yAxis: avg.index2AvgLine,
                            name: $name_array[$index2]+'平均线',
                            itemStyle: {
                                normal: {
                                    color: "#b84a58",
                                }
                            }
                        }]
                    }
                }]
            };
            console.log(avg);
            myChart0.setOption(option_scatter,true);
        }

    </script>


</body>

</html>
<!-- radio shijian -->
    <script type="text/javascript">
        $("#compare_radio").click(function(event) {
            /* Act on the event */
            console.log("click ----------");
            console.log($(this).val());
            if ($(this).val()=="true") {
                $(this).val("false");
            }else{
                $(this).val("true");
            }
        });
    </script>
<!-- 查看类型选择 -->
<script type="text/javascript">
    var unit_data = 5;
    $("#filter_select li").click(function () {
        unit_data = $(this).val();
        switch (unit_data) {
            case 1:
            case 3:
            case 4:
            case 5:
            case 7:

                $("#div_1").show();
                $("#div_2").hide();
                $("#div_3").hide();
                $("#div_4").hide();
                break;
            case 22:
                $("#div_1").hide();
                $("#div_2").hide();
                $("#div_3").hide();
                $("#div_4").hide();
                break;
            case 33:
                $("#div_1").hide();
                $("#div_2").show();
                $("#div_3").hide();
                $("#div_4").hide();
                break;
            case 44:
                $("#div_1").hide();
                $("#div_2").hide();
                $("#div_3").show();
                $("#div_4").hide();
                break;
            case 55:
                $("#div_1").hide();
                $("#div_2").hide();
                $("#div_3").hide();
                $("#div_4").show();
                break;
            case 66:
                $("#div_1").hide();
                $("#div_2").hide();
                $("#div_3").hide();
                $("#div_4").hide();
                break;
            default:
                break;
        }
        $("#loading",window.parent.document).show();
        $.ajax({
            url: '__CONTROLLER__/account_check',
            type: 'POST',
            dataType: 'json',
            data: { filter_type: unit_data },
        })
            .done(function (data) {
                refreshDOM(unit_data, data.data);
                $("#loading",window.parent.document).hide();
                console.log(data.data);
                console.log("success");
            })
            .fail(function (e) {
                console.log("error");
            })
            .always(function (e) {
                console.log("complete");
            });

    });
</script>
<!--计划单元关键词创意选择pager_select-->
<script type="text/javascript">
    var tier_selected = '';
    $("#pager_select a").click(function (event) {
        tier_selected = $(this).text();
        // 0415添加
        $("#filter_select li").eq(7).html('<a href="javascript:">' + tier_selected + '分布</a>');
        $("#filter_select li").eq(9).html('<a href="javascript:">' + tier_selected + '对比</a>');
        //$("#points").trigger('click');
        $("#fanwei").show();
        $("#set_fanwei").text(tier_selected);
        /* $("#beixuan").html("*默认为全部");*/
        // 0415结束

        /*console.log(tier_selected);*/
        /*console.log( $("#loading",window.parent.document).show());
        $("#loading",window.parent.document).show();
        $.ajax({
            url: '__CONTROLLER__/account_check',
            type: 'POST',
            dataType: 'json',
            data: { pager_select: tier_selected },
        })
            .done(function (data) {

                refreshDOM(5, data.data);
                $("#loading",window.parent.document).hide();
                console.log("success");
            })
            .fail(function () {
                console.log("error");
            })
            .always(function () {
                console.log("complete");
            });*/
            /*$("#loading",window.parent.document).show();*/
        $.ajax({
            type: "post",
            url: "__MODULE__/Ajax/handle_data_check",
            data: {
                pager_select: tier_selected
            },
            //async: false,
            dataType: "json",
            success: function (data) {
                showMultiTree(tier_selected,data.data);
                $("#loading",window.parent.document).hide();
            }
        });
        
    });
    $("#send_mytree").click(function () {
        $("#firstpane").hide();
        /*$("#beixuan").html('');*/
        // 0417添加
        $("#cengji").text(jQuery.parseJSON(JSON.stringify($temp)));
        /*使用JSON.stringify($temp)方法将object转换为json字符串*/
        //console.log(typeof (jQuery.parseJSON(JSON.stringify($temp))));
        $("#loading",window.parent.document).show();
        $.ajax({
            url: '__CONTROLLER__/account_check',
            type: 'POST',
            dataType: 'json',
            data: {
                statIds: jQuery.parseJSON(JSON.stringify($temp)),
                pager_select: tier_selected,
                compare_radio :$("#compare_radio").val()
            },
        })
            .done(function (data) {
                refreshDOM(unit_data, data.data);
                $("#loading",window.parent.document).hide();
                console.log("success");
                console.log(data);
            })
            .fail(function () {
                console.log("error");
            })
            .always(function () {
                console.log("complete");
            });

        //console.log($temp);
    });
</script>
<!-- 设备选择 -->
<script type="text/javascript">
    $("#device").change(function (event) {
        $device = $(this).val();
        $("#loading",window.parent.document).show();
        $.ajax({
            url: '__CONTROLLER__/account_check',
            type: 'POST',
            dataType: 'json',
            data: { device: $device },
        })
            .done(function (data) {
                /*console.log("xxxxxxxxxxxxxxxxunit_data");
                console.log(unit_data);*/
                refreshDOM(unit_data, data.data);
                $("#loading",window.parent.document).hide();
                console.log("success");
            })
            .fail(function () {
                console.log("error");
            })
            .always(function () {
                console.log("complete");
            });

    });
</script>
<!-- 日期选择 -->
<script>
    laydate.render({
        elem: '#datepicker1',
        range: true, //指定元素
        done: function (value) {
            /* $("#riqi").val(value);*/
            $("#loading",window.parent.document).show();
            $.ajax({
                url: '__CONTROLLER__/account_check',
                type: 'POST',
                dataType: 'json',
                data: {
                    datepicker: value,
                    pager_select: tier_selected
                },
            })
                .done(function (data) {

                    console.log("success");
                    console.log(data.data);
                    console.log(option0);
                    refreshDOM(unit_data, data.data);
                    $("#loading",window.parent.document).hide();
                })
                .fail(function () {
                    console.log("error");
                })
                .always(function () {
                    console.log("complete");
                });
        }
    });
</script>

<!-- 区域选择 -->
<script type="text/javascript">
    /*地域自定义事件 */
    $("#selfdefine_region").click(function (event) {
        $("#area_multipicker").trigger('click');
    });
    /*区域选择响应事件*/
    $("#area_action").click(function (event) {
        /* Act on the event */
        if ($(dataCityinput).val() != null) {
            console.log($(dataCityinput).val());
            console.log($(dataCityinput).data());

            /*window.location.href = "__CONTROLLER__/index?area_value=" + $(dataCityinput).data("value");*/
            $("#loading",window.parent.document).show();
            $.ajax({
                url: '__CONTROLLER__/account_check',
                type: 'POST',
                dataType: 'json',
                data: { area_city: $(dataCityinput).data("value") },
            })
                .done(function (data) {
                    refreshDOM(data.data);
                    $("#loading",window.parent.document).hide();
                    console.log(data.data);
                    console.log("success");

                })
                .fail(function () {
                    console.log("error");
                })
                .always(function () {
                    console.log("complete");
                });

        }
        console.log($("input[name='area']").val());

    });
</script>
<!-- refreshDOM(unit_data,data.data); -->
<script type="text/javascript">
    function refreshDOM($unit_data, $data) {
        $("#chart_data").text(JSON.stringify($data));
        /* console.log($data);
         console.log($("#chart_data").text());
         console.log($unit_data);*/
        console.log("refreshDOM--------------");
        switch ($unit_data) {
            case 5:
            case 4:
            case 1:
            case 3:
            case 7:
                //set_option_0($data);
                $("#kpi_line_select").trigger('change');
                break;
            case 22:
                set_option_device($data);
                //$("#kpi_line_select").trigger('change');
                break;
            case 33:
                /*地域数据更新 region_data*/
                set_option_region($data);
                //$("#kpi_line_select").trigger('change');
                break;
            case 44:
                /* set_option_scatter($data,'compare_position_impression');*/ 
                $("#compare_select").trigger("change");
                break;
            case 55:
                $("#data_pie_select").trigger('change');
                break;
            case 66:
                set_option_bar($data,tier_selected);
                break;
            default:
                break;
        }
    }

</script>
<!-- 指标选择 展现点击消费kpi_line_select -->
<script type="text/javascript">
    $("#kpi_line_select").change(function (event) {
        $kpi_line_value = $(this).val();
        //set_option_0($data);
        $d1 = $.parseJSON($("#chart_data").text());
        $temp_name = $(this).val();
        $data = new Array();
        $data['name'] = $temp_name;
        $data['xAxis_data']=$d1[0]['data'].date;
        $data_arr_temp = new Array();
        for (var i = 0; i < $d1.length; i++) {
            var tt = {};
            tt.name = $d1[i]['name'];
            tt.data = $d1[i]['data'][$kpi_line_value];
            tt.type = 'line';
            tt.smooth ='true';

            $data_arr_temp.push($.parseJSON(JSON.stringify(tt)));
        }
        $data['series_data'] = $data_arr_temp;
        console.log($data);
        set_option_0($data);
        
        /*option0.xAxis.data = $.parseJSON($("#chart_data").text()).date;
        option0.series[0].data = $.parseJSON($("#chart_data").text())[$(this).val()];
        myChart0.setOption(option0, true);*/

    });
    $("#compare_select").change(function (event) {
        $compare_select_value = $(this).val();
        $data_temp = $.parseJSON($("#chart_data").text());
        set_option_scatter($data_temp[0]['data'],$compare_select_value);
    });
    $("#data_pie_select").change(function(event) {
        $data_pie_value = $(this).val();
        $data_temp = $.parseJSON($("#chart_data").text());
        set_option_pie($data_temp[0]['data'],$data_pie_value);
    });
</script>